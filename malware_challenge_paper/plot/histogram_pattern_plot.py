import numpy as np
import matplotlib.pyplot as plt

from scipy.stats import gaussian_kde


if __name__ == '__main__':
    HISTOGRAM_FILE_PATH = r'D:\python_workspace\workspace\prototype_selection\histogram\entropy_histogram_l1\0A32eTdBKayjCWhZqDOQ.histogram'

    with open(HISTOGRAM_FILE_PATH, 'r') as file_descriptor:
        line = file_descriptor.readline()

    line = line.strip()

    histograms = list()
    histogram = list()

    values = line.split(' ')
    for value in values:
        index = value.split(':')[0]
        value = value.split(':')[1]

        histogram.append(float(value) * 100)
        if len(histogram) == 256:
            histograms.append(histogram)

            histogram = list()

    density = gaussian_kde(histograms[0])
    density.covariance_factor = lambda: .25
    density._compute_covariance()

    xs = np.linspace(0, 10, 256)

    print(xs)

    print(density(xs))

    # print(histograms[0])
    # print(histograms[1])
    #
    plt.figure(figsize=(8, 6))
    plt.plot(list(range(256)), density(xs))
    # plt.plot(list(range(256)), histograms[1])

    plt.show()


    # plt.hist(histograms[1], bins=256, alpha=0.5, label="data1")
    # # plt.hist(histograms[0], bins=100, alpha=0.5, label="data2")
    # plt.xlabel("Data", size=14)
    # plt.ylabel("Count", size=14)
    # plt.title("Multiple Histograms with Matplotlib")
    # plt.legend(loc='upper right')
    # plt.show()

    # np.random.seed(42)
    # n = 5000
    # mean_mu1 = 60
    # sd_sigma1 = 15
    # data1 = np.random.normal(mean_mu1, sd_sigma1, n)
    # mean_mu2 = 80
    # sd_sigma2 = 15
    # data2 = np.random.normal(mean_mu2, sd_sigma2, n)
    #
    # print(data1)
    # print(len(data1))
    #
    # print(data2)
    # print(len(data2))
    #
    # plt.figure(figsize=(8, 6))
    # plt.hist(data1, bins=100, alpha=0.5, label="data1")
    # plt.hist(data2, bins=100, alpha=0.5, label="data2")
    # plt.hist(data1 + data2, bins=100, alpha=0.5, label="data3")
    # plt.xlabel("Data", size=14)
    # plt.ylabel("Count", size=14)
    # plt.title("Multiple Histograms with Matplotlib")
    # plt.legend(loc='upper right')
    #
    # plt.show()